{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\r\nimport \"flatpickr/dist/flatpickr.min.css\";\r\nimport iziToast from \"izitoast\";\r\nimport \"izitoast/dist/css/iziToast.min.css\";\r\n\r\n\r\nlet userSelectedDate; \r\n\r\nconst startBtn = document.querySelector(`[data-start]`);\r\nconst input = document.querySelector(`#datetime-picker`);\r\nconst dataDays = document.querySelector(`[data-days]`);\r\nconst dataHours = document.querySelector(`[data-hours]`);\r\nconst dataMins = document.querySelector(`[data-minutes]`);\r\nconst dataSecs = document.querySelector(`[data-seconds]`);\r\n\r\nstartBtn.disabled = true;\r\n\r\nflatpickr(\"#datetime-picker\", {\r\n  enableTime: true,\r\n  dateFormat: \"Y-m-d H:i\",\r\n  time_24hr: true,\r\n  locale: {\r\n    firstDayOfWeek: 1\r\n  },\r\n  onClose(selectedDates) {\r\n    if (selectedDates.length === 0) return;\r\n\r\n    const selectedDate = selectedDates[0];\r\n    const now = new Date();\r\n\r\n    if (selectedDate < now) {\r\n      iziToast.show({\r\n        message: 'Please choose a date in the future',\r\n        messageColor: '#FFFFFF',\r\n        iconColor: '#FFFFFF',\r\n        backgroundColor: '#EF4040',\r\n        position: 'topRight',\r\n});\r\n      startBtn.disabled = true;\r\n    } else {\r\n      userSelectedDate = selectedDate;\r\n      startBtn.disabled = false;\r\n      console.log(\"Обрана дата:\", userSelectedDate);\r\n    }\r\n  },\r\n});\r\n\r\nstartBtn.addEventListener(\"click\", () => { \r\n  timer.start();\r\n  startBtn.disabled = true; \r\n  input.disabled = true;\r\n});\r\n\r\nconst timer = {\r\n  intervalId: null,\r\n\r\n  start() {\r\n    this.intervalId = setInterval(() => {\r\n      const currentTime = Date.now();\r\n      const diff = userSelectedDate - currentTime;\r\n\r\n      if (diff <= 0) {\r\n        clearInterval(this.intervalId);\r\n        startBtn.disabled = false; \r\n        input.disabled = false;\r\n        return;\r\n      }\r\n\r\n      const time = getTimeComponents(diff);\r\n      updateUI(time); \r\n    }, 1000);\r\n  },\r\n};\r\n\r\nfunction getTimeComponents(time) {\r\n  const days = pad(Math.floor(time / (1000 * 60 * 60 * 24)));\r\n  const hours = pad(Math.floor((time % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)));\r\n  const mins = pad(Math.floor((time % (1000 * 60 * 60)) / (1000 * 60)));\r\n  const secs = pad(Math.floor((time % (1000 * 60)) / 1000));\r\n\r\n  return { days, hours, mins, secs };\r\n}\r\n\r\nfunction pad(value) {\r\n  return String(value).padStart(2, '0');\r\n}\r\n\r\nfunction updateUI({ days, hours, mins, secs }) {\r\n  dataDays.textContent = days;\r\n  dataHours.textContent = hours;\r\n  dataMins.textContent = mins;\r\n  dataSecs.textContent = secs;\r\n}\r\n\r\n\r\n"],"names":["userSelectedDate","startBtn","input","dataDays","dataHours","dataMins","dataSecs","flatpickr","selectedDates","selectedDate","iziToast","timer","currentTime","diff","time","getTimeComponents","updateUI","days","pad","hours","mins","secs","value"],"mappings":"+IAMA,IAAIA,EAEJ,MAAMC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAQ,SAAS,cAAc,kBAAkB,EACjDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAW,SAAS,cAAc,gBAAgB,EAClDC,EAAW,SAAS,cAAc,gBAAgB,EAExDL,EAAS,SAAW,GAEpBM,EAAU,mBAAoB,CAC5B,WAAY,GACZ,WAAY,YACZ,UAAW,GACX,OAAQ,CACN,eAAgB,CACjB,EACD,QAAQC,EAAe,CACrB,GAAIA,EAAc,SAAW,EAAG,OAEhC,MAAMC,EAAeD,EAAc,CAAC,EAGhCC,EAFQ,IAAI,MAGdC,EAAS,KAAK,CACZ,QAAS,qCACT,aAAc,UACd,UAAW,UACX,gBAAiB,UACjB,SAAU,UAClB,CAAC,EACKT,EAAS,SAAW,KAEpBD,EAAmBS,EACnBR,EAAS,SAAW,GACpB,QAAQ,IAAI,eAAgBD,CAAgB,EAE/C,CACH,CAAC,EAEDC,EAAS,iBAAiB,QAAS,IAAM,CACvCU,EAAM,MAAK,EACXV,EAAS,SAAW,GACpBC,EAAM,SAAW,EACnB,CAAC,EAED,MAAMS,EAAQ,CACZ,WAAY,KAEZ,OAAQ,CACN,KAAK,WAAa,YAAY,IAAM,CAClC,MAAMC,EAAc,KAAK,MACnBC,EAAOb,EAAmBY,EAEhC,GAAIC,GAAQ,EAAG,CACb,cAAc,KAAK,UAAU,EAC7BZ,EAAS,SAAW,GACpBC,EAAM,SAAW,GACjB,MACD,CAED,MAAMY,EAAOC,EAAkBF,CAAI,EACnCG,EAASF,CAAI,CACd,EAAE,GAAI,CACR,CACH,EAEA,SAASC,EAAkBD,EAAM,CAC/B,MAAMG,EAAOC,EAAI,KAAK,MAAMJ,EAAQ,KAAoB,CAAC,EACnDK,EAAQD,EAAI,KAAK,MAAOJ,GAAQ,IAAO,GAAK,GAAK,KAAQ,IAAO,GAAK,GAAG,CAAC,EACzEM,EAAOF,EAAI,KAAK,MAAOJ,GAAQ,IAAO,GAAK,KAAQ,IAAO,GAAG,CAAC,EAC9DO,EAAOH,EAAI,KAAK,MAAOJ,GAAQ,IAAO,IAAO,GAAI,CAAC,EAExD,MAAO,CAAE,KAAAG,EAAM,MAAAE,EAAO,KAAAC,EAAM,KAAAC,CAAI,CAClC,CAEA,SAASH,EAAII,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASN,EAAS,CAAE,KAAAC,EAAM,MAAAE,EAAO,KAAAC,EAAM,KAAAC,CAAI,EAAI,CAC7ClB,EAAS,YAAcc,EACvBb,EAAU,YAAce,EACxBd,EAAS,YAAce,EACvBd,EAAS,YAAce,CACzB"}